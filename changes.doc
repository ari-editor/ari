
　　＊＊＊＊ 「あり？(Japanese fat ae with mock SKK)」の説明  ＊＊＊＊

			   ari version 1.00,  Copyright (C) 1991 Yuji Nimura
					    「あり？」 1.00 版  Apr. 12 1992
							  著作者  二村  祐地
						JUNET:nimura@isl.melco.co.jp
					     Yuji.Nimura@ecs.isl.melco.co.jp


本ドキュメントは日本語入力機能付きエディタ「あり？」についての変更履歴です。
つぎの変更履歴について記載しています。

  ・version 0.92 -> 1.00


＊＊＊＊ version 0.92 -> 1.00 ＊＊＊＊

○変更内容概要

・辞書登録機能を追加（':toroku'あるいは':touroku'コマンド）
  （ari.doc 『4.6 語句の登録』参照）
・仮名漢字変換における変換候補順変更を実現
  （ari.doc 『付録 B.3 語句の検索、登録とローカル辞書ファイルの更新』参照）
・ローカル辞書ファイルの更新機能を追加
  （ari.doc 『付録 B.3 語句の検索、登録とローカル辞書ファイルの更新』参照）
・インデックス付き辞書ファイルによる起動時間を短縮
  （ari.doc 『付録 B.4 インデックス付き辞書ファイルについて』参照）
・環境変数 ARI_SETUPによる起動時の動作指定を実現
  （ari.doc 『2.7 動作指定について』参照）
・':set param'コマンドによる、漢字コードおよび動作指定起動を追加
  （ari.doc 『2.7 動作指定について』参照）
・コンパイルオプション BRKFENCEの削除（動作指定による実現へ変更）
  （ari.doc 『2.7 動作指定について』参照）
・コンパイルオプション UPDATE_DIC、FRAME_POOL、SMALL_POOL、SMALL_REGの追加
  （ari.doc 『付録Ｄ コンパイルオプションの説明』参照）
・カーソルを単語で移動させる場合、漢字や仮名も（ある程度）考慮するよう変更
・lazy.cに集約されていた端末制御機能のうち、機種依存性の高い部分を分離独立
  （mnxio.cの追加）
・standard タイプの起動時に、仮名漢字変換プログラムの起動を待つよう変更
  （sleep()関数をつかわなくした）
・':q'コマンド、':w'コマンド、':wq'および':x'コマンドでエラー時メッセージを
  出力するよう変更
・':w file'コマンドを追加

○追加されたコマンド一覧

 :toroku     -- 単語登録
 :touroku    -- 単語登録
 :set param  -- 動作指定
 :set        -- 動作指定状況表示
 :set all    -- 動作指定状況表示
 :setup      -- 動作指定状況表示

':set param'コマンドの paramとして指定できるパラメータを以下に示します。
  （ari.doc 『2.7 動作指定について』参照）

  codedef=ENE@J   漢字コードを指定する。
  tab=8           TAB量を指定する。
                      notabexpandを指定している場合は、TAB量は端末の設定と
                      一致している必要がある。
  notabexpand     TABの展開を端末機能にまかせる。
  tabexpand       TABをspaseに展開して端末に送る。
  nobreakfence    文字の入力時にBSで入力開始位置を越えて文字を削除できない。
  breakfence      文字の入力時にBSで入力開始位置を越えて文字を削除できる。
  noasciiindicate 文字の入力時、『ASCIIモード』では画面にモード表示をしない。
  asciiindicate   文字の入力時、『ASCIIモード』では画面にモード表示『【a】』
                  を表示する。

○環境変数 ARI_SETUPによる動作指定
  （ari.doc 『2.7 動作指定について』参照）

':set param'コマンドで設定できる動作指定は、すべて環境変数 ARI_SETUPを用いて
「あり？」起動時にも設定することができます。環境変数 ARI_SETUPにはパラメータ
のみ記載します。'|'または ','をはさむことで複数の動作指定も可能です。
  「あり？」のデフォルトの動作指定は以下と同等です。

  $ ARI_SETUP='codedef=ENE@J | tab=8 | notabexpand'
  $ ARI_SETUP="$ARISETUP |nobreakfence|noasciiindicate"
  $ export ARI_SETUP

なお環境変数 ARI_CODEDEFによる漢字コード指定は、環境変数 ARI_SETUPによる指定
よりも優先されます。

○辞書登録の仕方
  （ari.doc 『4.6 語句の登録』参照）

語句の登録は ':toroku'コマンドで行います。(':touroku'コマンドも同様)

'toroku'コマンドの実行にさきだって、まずカーソルを登録しようとする語句の先頭
に移動しておきます。次に 'toroku'コマンドを実行すると、画面左下に『登録単語：』
と表示されますので、'h'あるいは 'l'でカーソルを移動して登録する語句を指定し
(単語は画面左下に表示される)、CR( = ^M)を入力します。

登録単語の指定がすむと、つぎは読みを入力します。例えば登録単語として『野良猫』
を指定していると、画面最下行には次のように表示されます。 

  【あ】  単語：「野良猫」　よみ：

読みの入力は通常の文字入力と同様です。ただし英数字、記号、ひらがなのみが有効
です。CRを入力すると語句の登録は終了します。登録した語句はすぐに仮名漢字変換
で利用できますが、ローカル辞書ファイルには「あり？」終了時に反映されます。

なお語句の登録に失敗した場合は画面左下に『単語登録できません』と表示されます。
また登録単語や読みの長さが０であったり、ESCが入力された場合は、単語登録は中断、
終了します。

○仮名漢字変換における変換候補検索順番の変更
  （ari.doc 『付録 B.3 語句の検索、登録とローカル辞書ファイルの更新』参照）

もっとも最近に使われた候補を最初に検索するよう検索順番を自動的に変更します。
ただしコンパイルオプション SMALL_POOL あるいは SMALL_REGを有効にして makeした
場合は、この機能は無効となります。

○ローカル辞書の更新機能
  （ari.doc 『付録 B.3 語句の検索、登録とローカル辞書ファイルの更新』参照）

新たに登録された単語は、ローカル辞書ファイルに追加されます。
元のローカル辞書ファイルは、(可能であれば)従来のファイル名に'~'を追加した
名前で保存されます。


○インデックス付き辞書ファイルの作成の仕方
  （ari.doc 『付録 B.4 インデックス付き辞書ファイルについて』参照）

インデックス付き辞書ファイルは、SKK辞書ファイルをもとに見出し位置の情報を
ファイルの先頭に付加したものです。

仮名漢字変換プログラム skksrchあるいは stand aloneタイプの「あり？」は、イン
デックスの付いていない普通の SKK辞書ファイルを利用することができますが、大き
な辞書ファイルはインデックス付き辞書ファイルとすることで、プログラムを高速に
起動することができます。このためサイズの大きい共通辞書ファイルはインデックス
付き辞書ファイルとされることを勧めます。

インデックス付き辞書ファイルの作成には skksrchコマンドを使い、元になる辞書
ファイルをskkjisyo、作成するインデックス付き辞書を idxskkjisyo とすると、

 $ skksrch -index skkjisyo > idxskkjisyo

あるいは、

 $ skksrch -index skkjisyo -to idxskkjisyo

と実行してください。

なおインデックス情報は ASCIIテキストとして付加されていますので、インデックス付
き辞書は int型変数の大きさや endianの異なるシステム間でも共有することができま
す。また SKK辞書ファイル同様エディタ等で容易に編集が可能です。ただしインデック
ス付き辞書ファイルを編集した場合はインデックス情報が無効になりますので、かなら
ず編集後のファイルをもとに再度インデックス付き辞書ファイルを生成し直してくださ
い。

○コンパイルオプションの追加および削除
  （ari.doc 『付録Ｄ コンパイルオプションの説明』参照）

・追加されたオプション
    UPDATE_DIC … 単語登録、変換候補順変更および辞書更新の各機能を有効にする
    FRAME_POOL … UPDATE_DIC指定時に利用する内部作業領域の大きさを指定
    SMALL_POOL … UPDATE_DIC指定時での変換候補順変更の機能を無効にする
                  (内部作業領域の効率的利用のため)
    SMALL_REG  … MINIX for IBM/PCなど data + stack 領域が 64KBに制限されてい
                  る場合に指定

・削除されたオプション
    BRKFENCE   … 環境変数 ARI_SETUPで起動時に動作指定できるようにしたため

＊＊＊＊ End of changes.doc ＊＊＊＊
